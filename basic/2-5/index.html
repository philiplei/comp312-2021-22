<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.87.0" />
    <meta name="description" content="">
<meta name="author" content="Philip Lei">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>2-5 Functions as objects and callbacks :: COMP312 notes</title>

    
    <link href="/css/nucleus.css?1632280221" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1632280221" rel="stylesheet">
    <link href="/css/featherlight.min.css?1632280221" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1632280221" rel="stylesheet">
    <link href="/css/auto-complete.css?1632280221" rel="stylesheet">
    <link href="/css/theme.css?1632280221" rel="stylesheet">
    <link href="/css/tabs.css?1632280221" rel="stylesheet">
    <link href="/css/hugo-theme.css?1632280221" rel="stylesheet">
    
    <link href="/css/theme-green.css?1632280221" rel="stylesheet">
    
    

    <script src="/js/jquery.min.js?1632280221"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/basic/2-5/">
    <nav id="sidebar" class="">
  
  
  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://philiplei.github.io">
    <i class="fas fa-file-code"></i> <b>COMP312 course notes</b>
</a>

    </div>
    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href="/"><i class="fas fa-home"></i> Home</a>
        </li>
      </ul>
    </section>
  

  <div class="highlightable">
    <ul class="topics">
      
        
        





  
		
    
      
      
      <li data-nav-id="/basic/" title="JavaScript basics" class="dd-item parent">
        <a href="/basic/">
          
JavaScript basics

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/basic/2-1/" title="2-1 Basic data types and control" class="dd-item">
        <a href="/basic/2-1/">
          
2-1 Basic data types and control

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/basic/2-2/" title="2-2 Arrays" class="dd-item">
        <a href="/basic/2-2/">
          
2-2 Arrays

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/basic/2-3/" title="2-3 Functions" class="dd-item">
        <a href="/basic/2-3/">
          
2-3 Functions

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/basic/2-4/" title="2-4 Objects as data structure" class="dd-item">
        <a href="/basic/2-4/">
          
2-4 Objects as data structure

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/basic/2-5/" title="2-5 Functions as objects and callbacks" class="dd-item active">
        <a href="/basic/2-5/">
          
2-5 Functions as objects and callbacks

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/basic/2-6/" title="2-6 Objects with methods" class="dd-item">
        <a href="/basic/2-6/">
          
2-6 Objects with methods

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/basic/2-7/" title="2-7 Defining class" class="dd-item">
        <a href="/basic/2-7/">
          
2-7 Defining class

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/client/" title="Client-side programming" class="dd-item">
        <a href="/client/">
          
Client-side programming

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/client/3-1/" title="3-1 Background" class="dd-item">
        <a href="/client/3-1/">
          
3-1 Background

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/client/3-2/" title="3-2 Vue application basics" class="dd-item">
        <a href="/client/3-2/">
          
3-2 Vue application basics

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/client/3-3/" title="3-3 Dynamic structure in template" class="dd-item">
        <a href="/client/3-3/">
          
3-3 Dynamic structure in template

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/client/3-4/" title="3-4 Events, methods and component lifecycle" class="dd-item">
        <a href="/client/3-4/">
          
3-4 Events, methods and component lifecycle

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/client/3-5/" title="3-5 Form controls and bi-directional binding" class="dd-item">
        <a href="/client/3-5/">
          
3-5 Form controls and bi-directional binding

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/client/3-6/" title="3-6 Component: motivation and features" class="dd-item">
        <a href="/client/3-6/">
          
3-6 Component: motivation and features

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/client/3-7/" title="3-7 Vue projects and build tools" class="dd-item">
        <a href="/client/3-7/">
          
3-7 Vue projects and build tools

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/client/3-8/" title="3-8 Make your own components" class="dd-item">
        <a href="/client/3-8/">
          
3-8 Make your own components

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/server/" title="Server-side programming" class="dd-item">
        <a href="/server/">
          
Server-side programming

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/server/4-1/" title="4-1 Node.js primer" class="dd-item">
        <a href="/server/4-1/">
          
4-1 Node.js primer

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/server/4-2/" title="4-2 Asynchronous callback" class="dd-item">
        <a href="/server/4-2/">
          
4-2 Asynchronous callback

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/server/4-3/" title="4-3 Promise, await and async" class="dd-item">
        <a href="/server/4-3/">
          
4-3 Promise, await and async

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/server/4-4/" title="4-4 Modules, import and export" class="dd-item">
        <a href="/server/4-4/">
          
4-4 Modules, import and export

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/server/4-5/" title="4-5 Database access" class="dd-item">
        <a href="/server/4-5/">
          
4-5 Database access

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
      
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'></a> > <a href='/basic/'>JavaScript basics</a> > 2-5 Functions as objects and callbacks
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#defining-function-objects">Defining function objects</a></li>
    <li><a href="#function-objects-as-parameters-and-return-values">Function objects as parameters and return values</a></li>
    <li><a href="#map-and-filter">Map and filter</a></li>
    <li><a href="#sorting">Sorting</a></li>
    <li><a href="#exercise">Exercise</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              2-5 Functions as objects and callbacks
            </h1>
          

        


<h2 id="defining-function-objects">Defining function objects</h2>
<p>Functions in JavaScript are often described as first-class values. (In fact, functions are objects, with their own properties and methods.) This means that, in many cases, if you can do something on numbers or strings, you can also do the same on functions. In particular, you can save a function in a variable, pass a function to another function, or return a function from a function.</p>
<p>There are three ways to define a function: function declaration, function expression and arrow function. We&rsquo;ve introduced <strong>function declaration</strong> in section 2-2. (For more info, read <a href="https://javascript.info/function-basics">reference</a>.) The function name in a function declaration is a variable that refers to a function object. You can assign a function object to another variable, and call the function through that variable.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">add</span> (<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span><span style="color:#f92672">+</span><span style="color:#a6e22e">b</span>; }
<span style="color:#a6e22e">add</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>); <span style="color:#75715e">// returns 3
</span><span style="color:#75715e"></span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">add</span>);
<span style="color:#a6e22e">dir</span>(<span style="color:#a6e22e">add</span>);  <span style="color:#75715e">// shows the structure of the function object
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// assign another name to the function
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">f</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">add</span>;
<span style="color:#a6e22e">f</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>); <span style="color:#75715e">// returns 3. this is the same as add(1,2)
</span><span style="color:#75715e">// dir(f)
</span></code></pre></div><p>The second way to define a function is <strong>function expression</strong>. The syntax of function expression is similar to that of function declaration, but function expressions appear in locations that the JavaScript language would expect a value, for example, the right side of an assignment, argument to a function call, and value in a JavaScript data structure (more about this in the next section.) Usually, we don&rsquo;t provide a name in a function expression, and therefore sometimes it&rsquo;s called an <strong>anonymous function</strong>.</p>
<blockquote>
<p>Technical note: It&rsquo;s possible to provide a name for function expression. See <a href="https://javascript.info/function-object">reference</a> for its use cases.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// define a function object, and assign it to a variable
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">f</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span><span style="color:#f92672">+</span><span style="color:#a6e22e">b</span> }
<span style="color:#a6e22e">f</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>); <span style="color:#75715e">// returns 3
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// define a function object, and call it immediately
</span><span style="color:#75715e"></span>(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span><span style="color:#f92672">+</span><span style="color:#a6e22e">b</span> })(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>); <span style="color:#75715e">// returns 3
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// define four functions for the arithmetic operators +, -, * and /. 
</span><span style="color:#75715e">// store them in an array
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">op</span> <span style="color:#f92672">=</span> [
  <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span><span style="color:#f92672">+</span><span style="color:#a6e22e">b</span> },
  <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span><span style="color:#f92672">-</span><span style="color:#a6e22e">b</span> },
  <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span><span style="color:#f92672">*</span><span style="color:#a6e22e">b</span> },
  <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span><span style="color:#f92672">/</span><span style="color:#a6e22e">b</span> }
];
<span style="color:#75715e">// calculate 1+2*3
</span><span style="color:#75715e"></span><span style="color:#a6e22e">op</span>[<span style="color:#ae81ff">0</span>](<span style="color:#ae81ff">1</span>, <span style="color:#a6e22e">op</span>[<span style="color:#ae81ff">2</span>](<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>)); <span style="color:#75715e">// return 1+2*3
</span></code></pre></div><p>A recent update of JavaScript introduces a new way to define function objects, known as <strong>arrow functions</strong>. Similar to function expression, an arrow function produces a function object. However, arrow functions support a more concise syntax, and allow some further shorthand notation to write simple functions.</p>
<blockquote>
<p>Technical note: there is an <strong>important difference</strong> between arrow functions and function expressions on the handling of <code>this</code>, which we&rsquo;ll explain in the next section. See <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions">mozilla reference</a> for more differences between arrow functions and function expressions.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#75715e">// a function expression
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">f1</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span><span style="color:#f92672">+</span><span style="color:#a6e22e">b</span>; } ;
<span style="color:#75715e">// the &#39;same&#39; function, written as an arrow function
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">f2</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) =&gt; { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span><span style="color:#f92672">+</span><span style="color:#a6e22e">b</span>; } ;

<span style="color:#75715e">// when the function body contains only a return statement, 
</span><span style="color:#75715e">// you only need to write the function return value after the fat arrow
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">f3</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) =&gt; <span style="color:#a6e22e">a</span><span style="color:#f92672">+</span><span style="color:#a6e22e">b</span>;

<span style="color:#75715e">// when there is only 1 parameter, you can omit the parenthesis
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">f4</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">a</span> =&gt; <span style="color:#a6e22e">a</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
</code></pre></div><h2 id="function-objects-as-parameters-and-return-values">Function objects as parameters and return values</h2>
<p>Passing a function object to another function is possible. Such usage is sometimes called <em>callback</em>: a programmer defines a callback function , but doesn&rsquo;t write code to call the callback directly. Instead, some other code will <em>call this function back</em>.
Callback can change the behavior of another function.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#75715e">// use a function op(x,y) to combine 3 values
</span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">combine</span> (<span style="color:#a6e22e">op</span>, <span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>, <span style="color:#a6e22e">c</span>) {
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">t</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">op</span>(<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>);
  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">ans</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">op</span>(<span style="color:#a6e22e">t</span>,<span style="color:#a6e22e">c</span>);
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">ans</span>;
}

<span style="color:#75715e">// define an anonymous function, and save it in the const &#39;add&#39;
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">add</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) { <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span><span style="color:#f92672">+</span><span style="color:#a6e22e">b</span>; }
<span style="color:#a6e22e">combine</span>(<span style="color:#a6e22e">add</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>); <span style="color:#75715e">// returns 21
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// define an arrow function for &#39;mul&#39;
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">mul</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">a</span>,<span style="color:#a6e22e">b</span>) =&gt; <span style="color:#a6e22e">a</span><span style="color:#f92672">*</span><span style="color:#a6e22e">b</span>; 
<span style="color:#a6e22e">combine</span>(<span style="color:#a6e22e">mul</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>); <span style="color:#75715e">// returns 336
</span></code></pre></div><p>It is also possible to generate a function object, and <em>return</em> it from a function. In the following example, the function <code>createRandomIntegerGenerator</code> defines an arrow function that calculates a random integer in the range [min, max]. Notice that this arrow function can access the local variables <code>min</code> and <code>max</code> from its outer function. This is a useful feature of JavaScript called <a href="https://javascript.info/closure">closure</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-javascript" data-lang="javascript"><span style="color:#75715e">// min and max are integers, min &lt; max 
</span><span style="color:#75715e">// this function returns a function that returns a random integer between min and max inclusively
</span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">createRandomIntegerGenerator</span>(<span style="color:#a6e22e">min</span>, <span style="color:#a6e22e">max</span>) {
  <span style="color:#66d9ef">return</span> () =&gt; Math.<span style="color:#a6e22e">floor</span>(Math.<span style="color:#a6e22e">random</span>() <span style="color:#f92672">*</span> (<span style="color:#a6e22e">max</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">min</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)) <span style="color:#f92672">+</span> <span style="color:#a6e22e">min</span>;
}

<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">tossDice</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createRandomIntegerGenerator</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">6</span>);
<span style="color:#a6e22e">tossDice</span>(); <span style="color:#75715e">// return a random number from 1,2,3,4,5,6
</span><span style="color:#75715e"></span><span style="color:#a6e22e">tossDice</span>(); <span style="color:#75715e">// return a random number from 1,2,3,4,5,6
</span></code></pre></div><h2 id="map-and-filter">Map and filter</h2>
<p>A common usage of callback functions is manipulation of a collection of data in containers like <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a> and <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map">Map</a> (to be discussed later). In this sections, we demonstrate using several methods from <code>Array</code> objects, namely <code>map</code>, <code>filter</code>, <code>reduce</code> and <code>sort</code>.</p>
<p>Consider the problem of performing some calculation on <em>each element</em> in an array, and collect the results as a new array.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">6</span>];
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">=</span> [];
<span style="color:#75715e">// round the numbers to 2 decimal places
</span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">n</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">a</span>) {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">n2</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">n</span><span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">100</span>;
  <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">n2</span>);
}
<span style="color:#75715e">// print a and b
</span></code></pre></div><p>This is a common scenario in programming. Therefore, the Array objects provide built-in methods to iterate their content. One of the simplest is <code>.map()</code>, which accepts a callback function as a parameter. The callback function takes one input, performs some processing, and returns the result. <code>.map()</code> collects these results into an output array.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">round2</span>(<span style="color:#a6e22e">n</span>) { <span style="color:#66d9ef">return</span> Math.<span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">n</span><span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">100</span>; }

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">6</span>];
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">round2</span>);
</code></pre></div><p>The callback function <code>round2</code> is not called directly by your code. Instead, after definition, you pass the callback function to someone else&rsquo;s code, and their code will call back your function later.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">6</span>];

<span style="color:#75715e">// using an anonymous function expression as callback
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">map</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">n</span>) {
   <span style="color:#66d9ef">return</span> Math.<span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">n</span><span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">100</span>;
});

<span style="color:#75715e">// using an arrow function as callback
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">c</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">n</span> =&gt; Math.<span style="color:#a6e22e">round</span>(<span style="color:#a6e22e">n</span><span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">100</span>);
</code></pre></div><p>Another way to look at this is that a callback function can customize / modify the functionality of an existing function. For example, to calculate areas of rectangles in an array, we can write another callback function and pass it to <code>.map()</code>. This allows us to simplify an explicit <code>for</code> loop iteration &hellip;</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#75715e">// an array of objects, each one is a rectangle with given width and height
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">rects</span> <span style="color:#f92672">=</span> [ { <span style="color:#a6e22e">w</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">4</span>, <span style="color:#a6e22e">h</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">5</span> }, { <span style="color:#a6e22e">w</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2</span>, <span style="color:#a6e22e">h</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">3</span> } ];
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">areas</span> <span style="color:#f92672">=</span> [];
<span style="color:#75715e">// calculate the area of the rectangles
</span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">k</span><span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">k</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">rects</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">k</span><span style="color:#f92672">++</span>) {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">area</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">rects</span>[<span style="color:#a6e22e">k</span>].<span style="color:#a6e22e">w</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">rects</span>[<span style="color:#a6e22e">k</span>].<span style="color:#a6e22e">h</span>;
  <span style="color:#a6e22e">areas</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">area</span>);
}
</code></pre></div><p>&hellip; to a <code>map</code> method call with callback function.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#75715e">// using function expression
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">areas</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">rects</span>.<span style="color:#a6e22e">map</span>(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">r</span>) {
  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">w</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">h</span>;
});
<span style="color:#75715e">// or using arrow function
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">areas</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">rects</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">r</span> =&gt; <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">w</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">h</span>);
</code></pre></div><p>In addition to <code>.map()</code>, another popular iteration function in Array is <code>.filter()</code>. This function iterates the content of an array, and runs the callback function to determine whether to keep or discard each element. <code>filter</code> returns the selection as a <em>new array</em>. It <em>does not modify</em> the source array.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">emo</span> <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;joy&#39;</span>, <span style="color:#e6db74">&#39;sadness&#39;</span>, <span style="color:#e6db74">&#39;anger&#39;</span>, <span style="color:#e6db74">&#39;disgust&#39;</span>, <span style="color:#e6db74">&#39;fear&#39;</span>];
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">emo2</span> <span style="color:#f92672">=</span> [];
<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">s</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">emo</span>) {
  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">length</span><span style="color:#f92672">&lt;</span><span style="color:#ae81ff">5</span>) <span style="color:#a6e22e">emo2</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">s</span>);
}

<span style="color:#75715e">// same as the for loop above
</span><span style="color:#75715e">// using function expression
</span><span style="color:#75715e"></span><span style="color:#a6e22e">emo2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">emo</span>.<span style="color:#a6e22e">filter</span>(<span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">s</span>) { <span style="color:#66d9ef">return</span> (<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">length</span><span style="color:#f92672">&lt;</span><span style="color:#ae81ff">5</span>); });
<span style="color:#75715e">// using arrow function
</span><span style="color:#75715e"></span><span style="color:#a6e22e">emo2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">emo</span>.<span style="color:#a6e22e">filter</span>(<span style="color:#a6e22e">s</span> =&gt; (<span style="color:#a6e22e">s</span>.<span style="color:#a6e22e">length</span><span style="color:#f92672">&lt;</span><span style="color:#ae81ff">5</span>));
</code></pre></div><h2 id="sorting">Sorting</h2>
<p>JavaScript arrays have a built-in <code>sort</code> method. It can sort numbers and strings, but it does not know how to sort other objects.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">=</span> [<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>];
<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">sort</span>();  <span style="color:#75715e">// a becomes [1,2,3,4,5]
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#39;apple&#39;</span>, <span style="color:#e6db74">&#39;orange&#39;</span>, <span style="color:#e6db74">&#39;banana&#39;</span>];
<span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">sort</span>(); <span style="color:#75715e">// b becomes [&#39;apple&#39;, &#39;banana&#39;, &#39;orange&#39;]
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">p</span> <span style="color:#f92672">=</span> [
  { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Peter&#39;</span>, <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span> }, { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Mary&#39;</span>, <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">9</span> },
  { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;John&#39;</span>, <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">11</span> } ];
<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">sort</span>(); <span style="color:#75715e">// sort by name? by age?
</span></code></pre></div><p>You can teach <code>.sort()</code> how to compare two objects with a callback function.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">p</span> <span style="color:#f92672">=</span> [
  { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Peter&#39;</span>, <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span> }, { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Mary&#39;</span>, <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">9</span> },
  { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;John&#39;</span>, <span style="color:#a6e22e">age</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">11</span> } ];

<span style="color:#75715e">// compare two persons by age
</span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">cmp</span> (<span style="color:#a6e22e">p1</span>, <span style="color:#a6e22e">p2</span>) {
  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">p1</span>.<span style="color:#a6e22e">age</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">p2</span>.<span style="color:#a6e22e">age</span>) <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;  <span style="color:#75715e">// p1 should be put before p2
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">p1</span>.<span style="color:#a6e22e">age</span><span style="color:#f92672">==</span><span style="color:#a6e22e">p2</span>.<span style="color:#a6e22e">age</span>) <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;  <span style="color:#75715e">// order not important
</span><span style="color:#75715e"></span>  <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">1</span>;                      <span style="color:#75715e">// p1 should be put after p2
</span><span style="color:#75715e"></span>}

<span style="color:#75715e">// sort by age
</span><span style="color:#75715e"></span><span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">sort</span>(<span style="color:#a6e22e">cmp</span>);
</code></pre></div><h2 id="exercise">Exercise</h2>
<ol>
<li>Given an array <code>let N = [ 32, 53, 42, 25, 48, 10 ]</code>, write a program to do the following. You should use callback functions. <a href="/chap2/ex2-5q1.js">(sample answer)</a></li>
</ol>
<ul>
<li>Obtain an array of hexadecimal representation of the numbers in <code>N</code>. (Hints: use <code>n.toString(16)</code> to convert a number <code>n</code> to hexadecimal)</li>
<li>Obtain an array of the numbers in <code>N</code> between 20 and 40 inclusively</li>
<li>Count how many of the numbers  in <code>N</code> are odd</li>
<li>Calculate the sum of the numbers in <code>N</code>. Try to use <code>.reduce()</code> in Array. <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">(online reference)</a></li>
</ul>
<ol start="2">
<li>The variable <code>comp312</code> is an array that contains records of student marks in the comp312 class. Each student record has three fields: name, test and exam. Write programs to do the following. Use an Array iteration method (i.e. <code>.map()</code>, <code>.filter()</code>, <code>.reduce()</code>, etc) at least once in each case. <a href="/chap2/ex2-5q2.js">(sample answer)</a>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-JavaScript" data-lang="JavaScript"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">comp312</span> <span style="color:#f92672">=</span> [
  { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Peter&#39;</span>, <span style="color:#a6e22e">test</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">80</span>, <span style="color:#a6e22e">exam</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">70</span> },
  { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;John&#39;</span>, <span style="color:#a6e22e">test</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">60</span>, <span style="color:#a6e22e">exam</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">65</span> },
  { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Mary&#39;</span>, <span style="color:#a6e22e">test</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">90</span>, <span style="color:#a6e22e">exam</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">85</span> },
  { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Christine&#39;</span>, <span style="color:#a6e22e">test</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">70</span>, <span style="color:#a6e22e">exam</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">76</span> }
];
</code></pre></div><ul>
<li>Get a list of student names in the comp312 class</li>
<li>Get a list of student record with test mark &gt;= 75</li>
<li>Get a list of student name whose test mark is greater than exam mark</li>
<li>Assume final mark = 0.6 * test + 0.4 * exam. Make an array with records showing the final mark and name for each student.</li>
<li>Sort the list in descending order of exam mark</li>
<li>Show the student record with the highest exam mark</li>
<li>Calculate the average test mark</li>
</ul>
</li>
</ol>



<footer class="footline">
    
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        
        
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1632280222"></script>
    <script src="/js/perfect-scrollbar.min.js?1632280222"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1632280222"></script>
    <script src="/js/jquery.sticky.js?1632280222"></script>
    <script src="/js/jquery.svg.pan.zoom.js?1632280222"></script>
    <script src="/js/featherlight.min.js?1632280222"></script>
    <script src="/js/modernizr.custom-3.6.0.js?1632280222"></script>
    
        
            <script src="/js/mermaid.min.js?1632280222"></script>
        
        
            
        
        <script>
            if (mermaid) {
                mermaid.mermaidAPI.initialize( Object.assign( { "securityLevel": "antiscript" }, JSON.parse("{ \"startOnLoad\": true }"), { startOnLoad: false } ) );
            }
        </script>
    
    <script src="/js/relearn.js?1632280222"></script>
    

  </body>
</html>

