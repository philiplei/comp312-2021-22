<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.87.0" />
    <meta name="description" content="">
<meta name="author" content="Philip Lei">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>3-4 Events, methods and component lifecycle :: COMP312 notes</title>

    
    <link href="/css/nucleus.css?1635836939" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1635836939" rel="stylesheet">
    <link href="/css/featherlight.min.css?1635836939" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1635836939" rel="stylesheet">
    <link href="/css/auto-complete.css?1635836939" rel="stylesheet">
    <link href="/css/theme.css?1635836939" rel="stylesheet">
    <link href="/css/tabs.css?1635836939" rel="stylesheet">
    <link href="/css/hugo-theme.css?1635836939" rel="stylesheet">
    
    <link href="/css/theme-green.css?1635836939" rel="stylesheet">
    
    

    <script src="/js/jquery.min.js?1635836939"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/3client/3-4/">
    <nav id="sidebar" class="">
  
  
  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="https://philiplei.github.io">
    <i class="fas fa-file-code"></i> <b>COMP312 course notes</b>
</a>

    </div>
    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href="/"><i class="fas fa-home"></i> Home</a>
        </li>
      </ul>
    </section>
  

  <div class="highlightable">
    <ul class="topics">
      
        
        





  
		
    
      
      
      <li data-nav-id="/2basic/" title="JavaScript basics" class="dd-item">
        <a href="/2basic/">
          
JavaScript basics

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/2basic/2-1/" title="2-1 Basic data types and control" class="dd-item">
        <a href="/2basic/2-1/">
          
2-1 Basic data types and control

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/2basic/2-2/" title="2-2 Arrays" class="dd-item">
        <a href="/2basic/2-2/">
          
2-2 Arrays

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/2basic/2-3/" title="2-3 Functions" class="dd-item">
        <a href="/2basic/2-3/">
          
2-3 Functions

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/2basic/2-4/" title="2-4 Objects as data structure" class="dd-item">
        <a href="/2basic/2-4/">
          
2-4 Objects as data structure

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/2basic/2-5/" title="2-5 Functions as objects and callbacks" class="dd-item">
        <a href="/2basic/2-5/">
          
2-5 Functions as objects and callbacks

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/2basic/2-6/" title="2-6 Objects with methods" class="dd-item">
        <a href="/2basic/2-6/">
          
2-6 Objects with methods

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/2basic/2-7/" title="2-7 Defining class" class="dd-item">
        <a href="/2basic/2-7/">
          
2-7 Defining class

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/3client/" title="Client-side programming" class="dd-item parent">
        <a href="/3client/">
          
Client-side programming

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/3client/3-1/" title="3-1 Background" class="dd-item">
        <a href="/3client/3-1/">
          
3-1 Background

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/3client/3-2/" title="3-2 Vue application basics" class="dd-item">
        <a href="/3client/3-2/">
          
3-2 Vue application basics

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/3client/3-3/" title="3-3 Dynamic structure in template" class="dd-item">
        <a href="/3client/3-3/">
          
3-3 Dynamic structure in template

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/3client/3-4/" title="3-4 Events, methods and component lifecycle" class="dd-item active">
        <a href="/3client/3-4/">
          
3-4 Events, methods and component lifecycle

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/3client/3-5/" title="3-5 Form controls and bi-directional binding" class="dd-item">
        <a href="/3client/3-5/">
          
3-5 Form controls and bi-directional binding

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/3client/3-6/" title="3-6 Component: motivation and features" class="dd-item">
        <a href="/3client/3-6/">
          
3-6 Component: motivation and features

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/3client/3-7/" title="3-7 Vue projects and build tools" class="dd-item">
        <a href="/3client/3-7/">
          
3-7 Vue projects and build tools

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/3client/3-8/" title="3-8 Make your own components" class="dd-item">
        <a href="/3client/3-8/">
          
3-8 Make your own components

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/4server/" title="Server-side programming" class="dd-item">
        <a href="/4server/">
          
Server-side programming

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/4server/4-1/" title="4-1 Node.js primer" class="dd-item">
        <a href="/4server/4-1/">
          
4-1 Node.js primer

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/4server/4-2/" title="4-2 Asynchronous callback" class="dd-item">
        <a href="/4server/4-2/">
          
4-2 Asynchronous callback

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/4server/4-3/" title="4-3 Promise, await and async" class="dd-item">
        <a href="/4server/4-3/">
          
4-3 Promise, await and async

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/4server/4-4/" title="4-4 Modules, import and export" class="dd-item">
        <a href="/4server/4-4/">
          
4-4 Modules, import and export

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/4server/4-5/" title="4-5 Database access" class="dd-item">
        <a href="/4server/4-5/">
          
4-5 Database access

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
        





  
		
    
      
      
      <li data-nav-id="/5appserver/" title="App server programming" class="dd-item">
        <a href="/5appserver/">
          
App server programming

          
        </a>
        <ul>
          
          
          

          
            
            





  
		
    
      <li data-nav-id="/5appserver/5-1/" title="5-1 Web API, concepts" class="dd-item">
        <a href="/5appserver/5-1/">
          
5-1 Web API, concepts

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/5appserver/5-2/" title="5-2 RPC Web API" class="dd-item">
        <a href="/5appserver/5-2/">
          
5-2 RPC Web API

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/5appserver/5-3/" title="5-3 REST Web API" class="dd-item">
        <a href="/5appserver/5-3/">
          
5-3 REST Web API

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/5appserver/5-4/" title="5-4 Making HTTP requests in client" class="dd-item">
        <a href="/5appserver/5-4/">
          
5-4 Making HTTP requests in client

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/5appserver/5-5/" title="5-5 Web app server" class="dd-item">
        <a href="/5appserver/5-5/">
          
5-5 Web app server

          
        </a>
      </li>
    
  

            
            





  
		
    
      <li data-nav-id="/5appserver/5-6/" title="5-6 Implementing REST API" class="dd-item">
        <a href="/5appserver/5-6/">
          
5-6 Implementing REST API

          
        </a>
      </li>
    
  

            
          
        </ul>
      </li>
    
  

        
      
    </ul>

    
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/McShelby/hugo-theme-relearn"><i class="fas fa-heart"></i></a> by <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'></a> > <a href='/3client/'>Client-side programming</a> > 3-4 Events, methods and component lifecycle
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#ui-event-handling">UI event handling</a></li>
    <li><a href="#timer">Timer</a></li>
    <li><a href="#life-cycle-methods">Life cycle methods</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              3-4 Events, methods and component lifecycle
            </h1>
          

        


<p>This section discusses several kinds of asynchronous function calls in client-side programming. We define these <strong>asynchronous functions</strong> in the program, but our code does not call them directly. Instead, we registered these asynchronous functions to handle some future events, e.g. user interface events, timers and Vue component life cycle.</p>
<h2 id="ui-event-handling">UI event handling</h2>
<p>In a web app, a common way to trigger an action is mouse click. When a user <strong>clicks</strong> on an HTML element, the element is said to <strong>fire a click event</strong>. We can use the Vue directive <code>v-on:click</code> (or shorthand notation <code>@click</code>) to define an <strong>event handler</strong>. Look at the code snippet from the <a href="/chap3/p307.html">example p307.html</a>.</p>
<p>The event handler can be a JavaScript statement, (e.g. <code>count++</code>) or the number of a <strong>method</strong> of the view model.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-vue" data-lang="vue">&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;app&#34;</span>&gt;
  &lt;<span style="color:#f92672">p</span>&gt;<span style="color:#a6e22e">Click</span> <span style="color:#a6e22e">count</span><span style="color:#f92672">:</span> {{ <span style="color:#a6e22e">count</span> }}&lt;/<span style="color:#f92672">p</span>&gt;
  &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;btn btn-primary&#39;</span> <span style="color:#a6e22e">v</span><span style="color:#f92672">-on</span><span style="color:#f92672">:</span><span style="color:#a6e22e">click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;count++&#39;</span>&gt;<span style="color:#a6e22e">Add</span> <span style="color:#ae81ff">1</span>&lt;/<span style="color:#f92672">button</span>&gt;<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">nbsp</span>; 
  &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;btn btn-success&#39;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;this.count--&#39;</span>&gt;<span style="color:#a6e22e">Minus</span> <span style="color:#ae81ff">1</span>&lt;/<span style="color:#f92672">button</span>&gt;<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">nbsp</span>;
  &lt;<span style="color:#f92672">button</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;btn btn-warning&#39;</span> <span style="color:#960050;background-color:#1e0010">@</span><span style="color:#a6e22e">click</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#39;reset&#39;</span>&gt;<span style="color:#a6e22e">Reset</span> <span style="color:#a6e22e">to</span> <span style="color:#ae81ff">0</span>&lt;/<span style="color:#f92672">button</span>&gt;<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">nbsp</span>; 
&lt;/<span style="color:#f92672">div</span>&gt;

&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">opts</span> <span style="color:#f92672">=</span> {
  <span style="color:#a6e22e">data</span>() {
    <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">count</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span> }
  },
  <span style="color:#a6e22e">methods</span><span style="color:#f92672">:</span> {
    <span style="color:#a6e22e">reset</span>(<span style="color:#a6e22e">event</span>) { 
      <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">count</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
      <span style="color:#75715e">// check the event object in browser console ... 
</span><span style="color:#75715e"></span>    }
    <span style="color:#75715e">// another method omitted
</span><span style="color:#75715e"></span>  }
};
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">vm</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Vue</span>.<span style="color:#a6e22e">createApp</span>(<span style="color:#a6e22e">opts</span>).<span style="color:#a6e22e">mount</span>(<span style="color:#e6db74">&#39;#app&#39;</span>);
</code></pre></div><p>Vue component methods are defined under the <code>methods</code> property of the options object. Inside the method body, you can use <code>this</code> to refer to data properties. Examine the view model <code>vm</code> in browser&rsquo;s developer tools to check that both data properties and methods are properties of <code>vm</code>.</p>
<blockquote>
<p>Vue component method definition cannot use arrow function, because it requires <code>this</code>.</p>
</blockquote>
<h2 id="timer">Timer</h2>
<p>JavaScript timers allow us to schedule a function to run after a certain time period. There are two types of timers. <strong>One-time timer</strong> will run a given function <em>once</em> after a fixed period, and <strong>periodic timer</strong> will run a given function repeatedly with an interval of a fixed period. <a href="https://javascript.info/settimeout-setinterval">(online reference)</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-js" data-lang="js"><span style="color:#75715e">// set a timer of 5s. show a message when timer expires
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">timerId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setTimeout</span>(
  ()=&gt;{ <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Time is up&#39;</span>) },
  <span style="color:#ae81ff">5000</span>
);

<span style="color:#75715e">// run this to cancel the timer because it expires
</span><span style="color:#75715e"></span><span style="color:#a6e22e">clearTimeout</span>(<span style="color:#a6e22e">timerId</span>);
</code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-js" data-lang="js"><span style="color:#75715e">// set an interval timer of 2s. show a message every 2s
</span><span style="color:#75715e"></span><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">timerId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">setInterval</span>(
  ()=&gt;{ <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;2s passed&#39;</span>) },
  <span style="color:#ae81ff">2000</span>
);

<span style="color:#75715e">// run this to cancel the timer 
</span><span style="color:#75715e"></span><span style="color:#a6e22e">clearInterval</span>(<span style="color:#a6e22e">timerId</span>);
</code></pre></div><p>Study the <a href="/chap3/p307-timer.html">example p307-timer.html</a> for another example of timers.</p>
<h2 id="life-cycle-methods">Life cycle methods</h2>
<p>Another source of asynchronous function calls in Vue is <a href="https://v3.vuejs.org/guide/instance.html#lifecycle-hooks">lifecycle hooks</a>.</p>
<p>Examples we studied up to this moment only apply a single component instance, which is the root component mounted to the document tree. (In later sections of this chapter, we&rsquo;ll learn how to define new components and use third-party components.) Each component instance will go through several moments in its lifecycle. These include <code>created</code>, <code>mounted</code>, <code>updated</code> and <code>unmounted</code>. By defining a <strong>lifecycle hook</strong> in the options object, we can instruct Vue what to do in different moments in the lifecycle.</p>
<p>Click here to see the <a href="https://v3.vuejs.org/images/lifecycle.svg">Vue component lifecycle diagram</a>.</p>
<p>For example, we can define a <code>created</code> hook to initialize a component after its data properties are created, but before its template is processed and mounted to the document tree. For example, you can load data from a server to populate the initial view of a component.</p>
<p>The following code snippet comes from <a href="/chap3/p307-lifecycle.html">example p307-lifecycle.html</a>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:3;-o-tab-size:3;tab-size:3"><code class="language-vue" data-lang="vue">&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;app&#34;</span>&gt;
  &lt;<span style="color:#f92672">p</span>&gt;<span style="color:#a6e22e">This</span> <span style="color:#a6e22e">component</span> <span style="color:#a6e22e">is</span> <span style="color:#a6e22e">created</span> {{ <span style="color:#a6e22e">count</span> }} <span style="color:#a6e22e">seconds</span> <span style="color:#a6e22e">ago</span>.&lt;/<span style="color:#f92672">p</span>&gt;
&lt;/<span style="color:#f92672">div</span>&gt;

&lt;<span style="color:#f92672">script</span>&gt;
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">opts</span> <span style="color:#f92672">=</span> {
  <span style="color:#a6e22e">data</span>() {
    <span style="color:#66d9ef">return</span> { <span style="color:#a6e22e">count</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span> };
  },
  <span style="color:#a6e22e">created</span>() {
    <span style="color:#a6e22e">setInterval</span>( ()=&gt;{<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">count</span><span style="color:#f92672">++</span>}, <span style="color:#ae81ff">1000</span> );
  },
  <span style="color:#a6e22e">updated</span>() {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;component updated...&#34;</span>);
  }
}
&lt;/<span style="color:#f92672">script</span>&gt;
</code></pre></div>


<footer class="footline">
    
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        
        
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1635836940"></script>
    <script src="/js/perfect-scrollbar.min.js?1635836940"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1635836940"></script>
    <script src="/js/jquery.sticky.js?1635836940"></script>
    <script src="/js/jquery.svg.pan.zoom.js?1635836940"></script>
    <script src="/js/featherlight.min.js?1635836940"></script>
    <script src="/js/modernizr.custom-3.6.0.js?1635836940"></script>
    
        
            <script src="/js/mermaid.min.js?1635836940"></script>
        
        
            
        
        <script>
            if (mermaid) {
                mermaid.mermaidAPI.initialize( Object.assign( { "securityLevel": "antiscript" }, JSON.parse("{ \"startOnLoad\": true }"), { startOnLoad: false } ) );
            }
        </script>
    
    <script src="/js/relearn.js?1635836940"></script>
    

  </body>
</html>

